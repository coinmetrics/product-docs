# How To Migrate From Catalog to Catalog V2 and Reference Data

This guide will help you migrate from using Catalog ("Catalog V1") to Catalog V2 and Reference Data. The biggest difference between Catalog V1 and Catalog V2 is that Catalog V1 contains both static "reference data" (name, category, product, etc.) and coverage for a given data type (e.g. `min_time` and `max_time` for `trades`).

Due to growing complexity in data coverage and the resulting performance bottlenecks from storing all of this data, this metadata is being separated. Catalog V2 and Reference Data allow for more lightweight and flexible queries as they can be queried across several dimensions (for example, `catalog-v2/asset-metrics` lets you filter by both asset and metric).

For more information on the reasoning behind the catalog migration, see [catalog-v1-v2-migration.md](../../core-concepts/catalog-v1-v2-migration.md "mention")

## Examples

### **How do I...**

#### ...get all hourly network data metrics?

**V1:**

* query catalog/asset-metrics, filter by frequency = '1h' and 'product' = 'Network Data'

```python
# Catalog V1

df_catalog_asset_metrics = client.catalog_asset_metrics().to_dataframe()
list_hourly_metrics_nd = list(df_catalog_asset_metrics.loc[
    (df_catalog_asset_metrics['frequency']=='1h') & (df_catalog_asset_metrics['product']=='Network Data')
])

```

**V2:**

* query reference-data/asset-metrics, filter for 'product' = 'Network Data'
* query catalog-v2/asset-metrics?metrics=\<LIST\_OF\_NETWORK\_DATA\_METRICS>, filter for frequency = '1h'

```python
# Catalog V2
asset_metrics_reference = client.reference_data_asset_metrics().to_dataframe()
list_metrics_nd = list(asset_metrics_reference.loc[asset_metrics_reference['product']=='Network Data', 'metric'])

asset_metrics_catalog = client.catalog_asset_metrics_v2(metrics=list_metrics_nd).to_dataframe()
list_hourly_metrics_nd = list(asset_metrics_catalog.loc[asset_metrics_catalog.frequency=='1h', 'metric'].unique())
```

#### ...get which assets are traded on each exchange?

**V1:**

* for each exchange, query catalog/markets?exchange=\<exchange>, filter responses' max\_time



**V2:**

* for each exchange, query catalog-v2/market-trades?exchange=\<exchange> filter responses' max\_time

## A Mapping of Catalog Endpoints to Catalog V2 and Reference Data Endpoints

| Existing Catalog Endpoint          | Catalog v2 Endpoints                                                                                                                                                                     | Reference Data Endpoints\*                                                                                                                                                                                 | Notes                                                                |
| ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------- |
| /catalog/assets                    | /catalog-v2/asset-metrics                                                                                                                                                                | /reference-data/assets, /reference-data/markets                                                                                                                                                            |                                                                      |
| /catalog/metrics                   | /catalog-v2/asset-metrics, /catalog-v2/exchange-metrics, /catalog-v2/exchange-asset-metrics, /catalog-v2/pair-metrics, /catalog-v2/institution-metrics, /catalog-v2/market-metrics       | /reference-data/asset-metrics, /reference-data/exchange-metrics, /reference-data/exchange-asset-metrics, /reference-data/pair-metrics, /reference-data/institution-metrics, /reference-data/market-metrics |                                                                      |
| /catalog/asset-metrics             | /catalog-v2/asset-metrics                                                                                                                                                                | /reference-data/asset-metrics                                                                                                                                                                              |                                                                      |
| /catalog/exchange-metrics          | /catalog-v2/exchange-metrics                                                                                                                                                             | /reference-data/exchange-metrics                                                                                                                                                                           |                                                                      |
| /catalog/exchange-asset-metrics    | /catalog-v2/exchange-asset-metrics                                                                                                                                                       | /reference-data/exchange-asset-metrics                                                                                                                                                                     |                                                                      |
| /catalog/pair-metrics              | /catalog-v2/pair-metrics                                                                                                                                                                 | /reference-data/pair-metrics                                                                                                                                                                               |                                                                      |
| /catalog/institution-metrics       | /catalog-v2/institution-metrics                                                                                                                                                          | /reference-data/institution-metrics                                                                                                                                                                        |                                                                      |
| /catalog/exchanges                 |                                                                                                                                                                                          | /reference-data/exchanges, /reference-data/markets                                                                                                                                                         |                                                                      |
| /catalog/exchange-assets           | /catalog-v2/exchange-asset-metrics                                                                                                                                                       | /reference-data/exchange-asset-metrics                                                                                                                                                                     |                                                                      |
| /catalog/pairs                     | /catalog-v2/pair-metrics                                                                                                                                                                 | /reference-data/pair-metrics                                                                                                                                                                               |                                                                      |
| /catalog/pair-candles              | /catalog-v2/pair-candles                                                                                                                                                                 |                                                                                                                                                                                                            |                                                                      |
| /catalog/institutions              | /catalog-v2/institution-metrics                                                                                                                                                          | /reference-data/institution-metrics                                                                                                                                                                        |                                                                      |
| /catalog/markets                   | /catalog-v2/market-trades, /catalog-v2/market-orderbooks, /catalog-v2/market-quotes, /catalog-v2/market-funding-rates, /catalog-v2/market-open-interest, /catalog-v2/market-liquidations | /reference-data/markets                                                                                                                                                                                    | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-trades             | /catalog-v2/market-trades                                                                                                                                                                |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-candles            | /catalog-v2/market-candles                                                                                                                                                               |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-orderbooks         | /catalog-v2/market-orderbooks                                                                                                                                                            |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-quotes             | /catalog-v2/market-quotes                                                                                                                                                                |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-funding-rates      | /catalog-v2/market-funding-rates                                                                                                                                                         |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-contract-prices    | /catalog-v2/market-contract-prices                                                                                                                                                       |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-implied-volatility | /catalog-v2/market-implied-volatility                                                                                                                                                    |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-greeks             | /catalog-v2/market-greeks                                                                                                                                                                |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-openinterest       | /catalog-v2/market-openinterest                                                                                                                                                          |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-liquidations       | /catalog-v2/market-liquidations                                                                                                                                                          |                                                                                                                                                                                                            | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/market-metrics            | /catalog-v2/market-metrics                                                                                                                                                               | /reference-data/market-metrics                                                                                                                                                                             | The existing catalog endpoint will be restricted to 170,000 markets. |
| /catalog/indexes                   | /catalog-v2/index-levels, /catalog-v2/index-constituents                                                                                                                                 | /reference-data/indexes                                                                                                                                                                                    |                                                                      |
| /catalog/index-candles             | /catalog-v2/index-candles                                                                                                                                                                |                                                                                                                                                                                                            |                                                                      |
| /catalog/asset-alerts              |                                                                                                                                                                                          | /reference-data/asset-alerts                                                                                                                                                                               |                                                                      |
| /catalog/asset-chains              | /catalog-v2/asset-chains                                                                                                                                                                 |                                                                                                                                                                                                            |                                                                      |
| /catalog/mempool-feerates          | /catalog-v2/mempool-feerates                                                                                                                                                             |                                                                                                                                                                                                            |                                                                      |
| /catalog/minig-pool-tips-summary   | /catalog-v2/mining-pool-tips-summary                                                                                                                                                     |                                                                                                                                                                                                            |                                                                      |
| /catalog/transaction-tracker       | /catalog-v2/transaction-tracker                                                                                                                                                          |                                                                                                                                                                                                            |                                                                      |

_\*Note that reference-data endpoints will show all data covered for a given entity, not just those visible in catalog-v2. This contrasts that of the behavior of catalog-v2 showing just the data available with your API key and catalog-v2-all showing all data._
